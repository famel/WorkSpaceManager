**Περιγραφή**: Το use case περιγράφει πώς ο χρήστης λαμβάνει άμεσες ειδοποιήσεις (push notifications) στη συσκευή του για σημαντικά γεγονότα που σχετίζονται με τις κρατήσεις του, όπως επιβεβαιώσεις, υπενθυμίσεις και ακυρώσεις.

**Πρωτεύων Actor**: Υπάλληλος

**Δευτερεύοντες Actors**: 
- Σύστημα Κρατήσεων (Backend)
- Apple Push Notification Service (APNS) / Firebase Cloud Messaging (FCM)

**Προϋποθέσεις**: 
- Ο χρήστης έχει εγκαταστήσει την εφαρμογή και έχει συνδεθεί τουλάχιστον μία φορά.
- Ο χρήστης έχει δώσει άδεια στην εφαρμογή να του στέλνει ειδοποιήσεις (κατά την πρώτη εκκίνηση της εφαρμογής).

**Μετα-συνθήκες**:
- **Επιτυχής**: 
  - Ο χρήστης λαμβάνει την ειδοποίηση στην οθόνη της συσκευής του (ακόμα και αν η εφαρμογή είναι κλειστή).
  - Πατώντας την ειδοποίηση, ο χρήστης μεταφέρεται στην σχετική οθόνη εντός της εφαρμογής.
- **Αποτυχής**: 
  - Η ειδοποίηση δεν παραδίδεται στον χρήστη.

**Βασική Ροή (Λήψη Ειδοποίησης Υπενθύμισης)**:
1. Το backend του Συστήματος Κρατήσεων, βάσει των ρυθμισμένων πολιτικών (βλ. UC-09), καθορίζει ότι πρέπει να σταλεί μια υπενθύμιση για μια επερχόμενη κράτηση (π.χ. 60 λεπτά πριν την έναρξη).
2. Το backend αναγνωρίζει τον χρήστη και τη συσκευή του (μέσω ενός device token που αποθηκεύτηκε κατά την πρώτη σύνδεση).
3. Το backend δημιουργεί το περιεχόμενο της ειδοποίησης (payload), π.χ. { "title": "Υπενθύμιση Κράτησης", "body": "Η κράτησή σας για την αίθουσα 'Conference Room A' ξεκινά σε 1 ώρα." }.
4. Το backend στέλνει το payload στην κατάλληλη υπηρεσία push notification (APNS για iOS, FCM για Android), μαζί με το device token του παραλήπτη.
5. Η υπηρεσία (APNS/FCM) προωθεί την ειδοποίηση στη συσκευή του χρήστη.
6. Το λειτουργικό σύστημα του τηλεφώνου εμφανίζει την ειδοποίηση στον χρήστη (ως banner, στην οθόνη κλειδώματος κ.λπ.).
7. Ο χρήστης πατάει πάνω στην ειδοποίηση.
8. Η εφαρμογή ανοίγει και, διαβάζοντας τα δεδομένα της ειδοποίησης, πλοηγεί τον χρήστη απευθείας στην οθόνη με τις λεπτομέρειες της συγκεκριμένης κράτησης.

**Εναλλακτικές Ροές**: -

**Ροές Εξαίρεσης**:
- **E1: Ο χρήστης έχει απενεργοποιήσει τις ειδοποιήσεις**
  - Αν ο χρήστης έχει μπλοκάρει τις ειδοποιήσεις από τις ρυθμίσεις του λειτουργικού συστήματος, η ειδοποίηση δεν θα εμφανιστεί ποτέ. Η διαδικασία ολοκληρώνεται χωρίς σφάλμα από την πλευρά του backend.

**Επιχειρησιακοί Κανόνες**: -

**Μη-Λειτουργικές Απαιτήσεις**:
- **Αμεσότητα**: Οι ειδοποιήσεις πρέπει να παραδίδονται σχεδόν αμέσως μετά την αποστολή τους από το backend.

**Σημειώσεις**:
- Άλλοι τύποι ειδοποιήσεων περιλαμβάνουν: "Η κράτησή σας επιβεβαιώθηκε", "Η κράτησή σας ακυρώθηκε λόγω μη εμφάνισης", "Μια κράτηση που δημιουργήθηκε από τον manager σας προστέθηκε για εσάς".

---
### UC-M-04: Ενσωμάτωση με Ημερολόγια Συσκευής και SSO

**Κωδικός**: UC-M-04

**Όνομα**: Ενσωμάτωση με Native Ημερολόγια και Διατήρηση Συνεδρίας SSO

**Περιγραφή**: Το use case καλύπτει δύο πτυχές της ενσωμάτωσης: 1) Τη δυνατότητα της εφαρμογής να προσθέτει τις κρατήσεις στο τοπικό ημερολόγιο της συσκευής (iCal, Google Calendar) και 2) Τον τρόπο με τον οποίο η εφαρμογή διατηρεί τον χρήστη συνδεδεμένο σε πολλαπλές χρήσεις χωρίς να χρειάζεται να εισάγει τα credentials του κάθε φορά, αξιοποιώντας τα αποθηκευμένα SSO tokens.

**Πρωτεύων Actor**: Υπάλληλος

**Δευτερεύοντες Actors**: 
- Native Calendar App (iOS/Android)
- Σύστημα Κρατήσεων (Backend)

**Προϋποθέσεις**: 
- Ο χρήστης είναι συνδεδεμένος στην εφαρμογή.

**Μετα-συνθήκες**:
- **Επιτυχής (Ημερολόγιο)**: 
  - Ένα νέο συμβάν (event) που αντιστοιχεί στην κράτηση προστίθεται στο ημερολόγιο της συσκευής.
- **Επιτυχής (SSO)**:
  - Ο χρήστης ανοίγει την εφαρμογή και είναι αυτόματα συνδεδεμένος.

**Βασική Ροή (Διατήρηση Συνεδρίας SSO)**:
1. Ο χρήστης κλείνει την εφαρμογή μετά από μια προηγούμενη χρήση.
2. Μετά από κάποιο χρονικό διάστημα, ο χρήστης ανοίγει ξανά την εφαρμογή.
3. Κατά την εκκίνηση, η εφαρμογή ελέγχει αν υπάρχει αποθηκευμένο ένα έγκυρο access token.
4. Αν το access token υπάρχει και δεν έχει λήξει, η εφαρμογή το χρησιμοποιεί για να κάνει κλήσεις στο backend API. Ο χρήστης είναι άμεσα συνδεδεμένος.
5. Αν το access token έχει λήξει, η εφαρμογή χρησιμοποιεί το αποθηκευμένο refresh token για να ζητήσει σιωπηλά (silently) ένα νέο access token από το Azure AD, χωρίς να απαιτείται αλληλεπίδραση από τον χρήστη.
6. Με το νέο access token, η εφαρμογή συνεχίζει τη λειτουργία της, διατηρώντας τον χρήστη συνδεδεμένο.

**Εναλλακτικές Ροές**:
- **A1: Προσθήκη στο Ημερολόγιο Συσκευής**
  - Μετά την επιτυχή ολοκλήρωση μιας κράτησης (βλ. UC-M-02), η εφαρμογή εμφανίζει μια επιλογή "Προσθήκη στο Ημερολόγιο".
  - Ο χρήστης πατάει αυτή την επιλογή.
  - Η εφαρμογή ζητά από τον χρήστη άδεια πρόσβασης στο ημερολόγιό του (αν δεν την έχει ήδη).
  - Η εφαρμογή δημιουργεί ένα event με τις λεπτομέρειες της κράτησης και το προσθέτει στο προεπιλεγμένο ημερολόγιο της συσκευής.

**Ροές Εξαίρεσης**:
- **E1: Ληγμένο Refresh Token**
  - Στο βήμα 5, αν και το refresh token έχει λήξει (κάτι που συμβαίνει μετά από μεγάλη περίοδο αδράνειας), η εφαρμογή δεν μπορεί να ανανεώσει τη συνεδρία.
  - Η εφαρμογή διαγράφει τα άκυρα tokens και ανακατευθύνει τον χρήστη στην οθόνη σύνδεσης για να αυθεντικοποιηθεί ξανά (βλ. UC-M-01).

**Επιχειρησιακοί Κανόνες**: -

**Μη-Λειτουργικές Απαιτήσεις**:
- **Απρόσκοπτη Εμπειρία**: Ο χρήστης δεν πρέπει να χρειάζεται να συνδέεται ξανά, εκτός αν περάσει πολύ μεγάλο χρονικό διάστημα ή ανακληθεί η πρόσβασή του.

**Σημειώσεις**:
- Η ενσωμάτωση με το ημερολόγιο της συσκευής είναι συμπληρωματική του συγχρονισμού με το Exchange (UC-02). Ενώ το UC-02 είναι server-to-server, αυτή η λειτουργία είναι client-side.

---
### UC-M-05: Offline Προβολή Κρατήσεων

**Κωδικός**: UC-M-05

**Όνομα**: Προβολή Επερχόμενων και Παλαιότερων Κρατήσεων σε Offline Λειτουργία

**Περιγραφή**: Το use case περιγράφει πώς ο χρήστης μπορεί να δει τις βασικές πληροφορίες των κρατήσεών του (π.χ. τοποθεσία, ώρα) ακόμα και όταν η συσκευή του δεν έχει σύνδεση στο internet. Αυτό επιτυγχάνεται με την τοπική αποθήκευση (caching) των δεδομένων.

**Πρωτεύων Actor**: Υπάλληλος

**Δευτερεύοντες Actors**: -

**Προϋποθέσεις**: 
- Ο χρήστης έχει συνδεθεί στην εφαρμογή τουλάχιστον μία φορά με ενεργή σύνδεση στο internet, ώστε οι κρατήσεις του να έχουν συγχρονιστεί και αποθηκευτεί τοπικά.

**Μετα-συνθήκες**:
- **Επιτυχής**: 
  - Ο χρήστης μπορεί να δει τις βασικές πληροφορίες των κρατήσεών του χωρίς σύνδεση στο internet.
- **Αποτυχής**: 
  - Η εφαρμογή εμφανίζει σφάλμα ή κενή λίστα αν δεν υπάρχουν αποθηκευμένα δεδομένα.

**Βασική Ροή**:
1. Ο χρήστης έχει ενεργή σύνδεση στο internet. Ανοίγει την εφαρμογή και πλοηγείται στην οθόνη "Οι Κρατήσεις μου".
2. Η εφαρμογή καλεί το backend API και ανακτά τη λίστα με τις επερχόμενες και πρόσφατες κρατήσεις του χρήστη.
3. Η εφαρμογή αποθηκεύει (caches) αυτά τα δεδομένα σε μια τοπική βάση δεδομένων στη συσκευή (π.χ. SQLite, Realm).
4. Αργότερα, ο χρήστης βρίσκεται σε μια περιοχή χωρίς σήμα (π.χ. υπόγειο) και δεν έχει σύνδεση στο internet.
5. Ανοίγει την εφαρμογή και πλοηγείται στην οθόνη "Οι Κρατήσεις μου".
6. Η εφαρμογή ανιχνεύει την απουσία δικτύου. Αντί να προσπαθήσει να καλέσει το API, ανακτά τα δεδομένα απευθείας από την τοπική βάση δεδομένων.
7. Η εφαρμογή εμφανίζει τη λίστα των κρατήσεων στον χρήστη, ενδεχομένως με μια ένδειξη ότι τα δεδομένα είναι από την τελευταία φορά που ήταν online.

**Εναλλακτικές Ροές**: -

**Ροές Εξαίρεσης**:
- **E1: Προσπάθεια εκτέλεσης online ενέργειας**
  - Ενώ είναι offline, ο χρήστης προσπαθεί να κάνει μια ενέργεια που απαιτεί σύνδεση (π.χ. να ακυρώσει μια κράτηση).
  - Η εφαρμογή εμφανίζει ένα μήνυμα που ενημερώνει τον χρήστη ότι απαιτείται σύνδεση στο internet για αυτή την ενέργεια.

**Επιχειρησιακοί Κανόνες**: 
- BR-M-01: Σε offline λειτουργία, όλες οι λειτουργίες που απαιτούν επικοινωνία με τον server (π.χ. νέα κράτηση, ακύρωση, αναζήτηση) πρέπει να είναι απενεργοποιημένες.

**Μη-Λειτουργικές Απαιτήσεις**:
- **Αποθήκευση**: Η τοπική αποθήκευση δεν πρέπει να καταναλώνει υπερβολικό χώρο στη συσκευή του χρήστη.

**Σημειώσεις**:
- Αυτή η λειτουργία αυξάνει σημαντικά τη χρηστικότητα και την αξιοπιστία της εφαρμογής, καθώς ο χρήστης μπορεί πάντα να ελέγξει πού είναι η θέση του, ακόμα και αν έχει προβλήματα συνδεσιμότητας.

---
### UC-M-06: Συμμόρφωση GDPR και Κρυπτογράφηση Δεδομένων

**Κωδικός**: UC-M-06

**Όνομα**: Διασφάλιση Προστασίας Προσωπικών Δεδομένων και Κρυπτογράφηση

**Περιγραφή**: Αυτό το use case δεν περιγράφει μια συγκεκριμένη ενέργεια του χρήστη, αλλά τις ενσωματωμένες απαιτήσεις ασφαλείας και προστασίας δεδομένων που πρέπει να διατρέχουν ολόκληρη την εφαρμογή, σύμφωνα με τον Γενικό Κανονισμό για την Προστασία Δεδομένων (GDPR).

**Πρωτεύων Actor**: Σύστημα (Εφαρμογή και Backend)

**Δευτερεύοντες Actors**: Υπάλληλος (ως υποκείμενο των δεδομένων)

**Προϋποθέσεις**: - 

**Μετα-συνθήκες**:
- **Επιτυχής**: 
  - Τα προσωπικά δεδομένα του χρήστη προστατεύονται σε όλα τα στάδια (κατά τη μεταφορά και την αποθήκευση).
  - Η εφαρμογή λειτουργεί σε πλήρη συμμόρφωση με τον GDPR.
- **Αποτυχής**: 
  - Υπάρχει κίνδυνος διαρροής ή μη εξουσιοδοτημένης πρόσβασης σε προσωπικά δεδομένα.

**Βασική Ροή (Αρχές Σχεδιασμού - Privacy by Design)**:
1.  **Κρυπτογράφηση κατά τη Μεταφορά (Data in Transit)**: Κάθε επικοινωνία μεταξύ της mobile εφαρμογής και του backend API πρέπει να γίνεται αποκλειστικά μέσω ασφαλών, κρυπτογραφημένων καναλιών (HTTPS/TLS 1.2+).

2.  **Κρυπτογράφηση κατά την Αποθήκευση (Data at Rest)**:
    -   **Στη Συσκευή**: Ευαίσθητες πληροφορίες που αποθηκεύονται τοπικά, όπως τα authentication tokens (βλ. UC-M-01), πρέπει να αποθηκεύονται στους ενσωματωμένους, κρυπτογραφημένους μηχανισμούς του λειτουργικού συστήματος (Keychain για iOS, Keystore για Android). Δεδομένα που αποθηκεύονται προσωρινά (caching, βλ. UC-M-05) πρέπει επίσης να είναι κρυπτογραφημένα.
    -   **Στο Backend**: Η βάση δεδομένων που φιλοξενεί τα δεδομένα των χρηστών και των κρατήσεων πρέπει να είναι κρυπτογραφημένη σε επίπεδο δίσκου (encryption at rest).

3.  **Ελαχιστοποίηση Δεδομένων (Data Minimization)**: Η εφαρμογή και το backend πρέπει να συλλέγουν και να επεξεργάζονται μόνο τα προσωπικά δεδομένα που είναι απολύτως απαραίτητα για τη λειτουργία της υπηρεσίας (π.χ. όνομα, email, τμήμα, ιστορικό κρατήσεων).

4.  **Δικαιώματα Υποκειμένου των Δεδομένων**: Η εφαρμογή, μέσω του web portal ή κατόπιν αιτήματος, πρέπει να παρέχει στους χρήστες τα δικαιώματα που ορίζει ο GDPR, όπως το δικαίωμα πρόσβασης, διόρθωσης και διαγραφής των δεδομένων τους.

5.  **Διαφάνεια**: Κατά την πρώτη χρήση, ο χρήστης πρέπει να ενημερώνεται για την πολιτική απορρήτου της εφαρμογής, η οποία εξηγεί με σαφήνεια ποια δεδομένα συλλέγονται, για ποιο σκοπό και για πόσο καιρό διατηρούνται.

**Εναλλακτικές Ροές**: -

**Ροές Εξαίρεσης**: -

**Επιχειρησιακοί Κανόνες**: 
- BR-M-02: Η πρόσβαση σε προσωπικά δεδομένα (π.χ. από διαχειριστές) πρέπει να καταγράφεται (audit logs).

**Μη-Λειτουργικές Απαιτήσεις**:
- **Ασφάλεια**: Η εφαρμογή πρέπει να περνά από τακτικούς ελέγχους ασφαλείας (penetration testing) για τον εντοπισμό και την αντιμετώπιση πιθανών ευπαθειών.

**Σημειώσεις**:
- Η συμμόρφωση με τον GDPR είναι μια συνεχής διαδικασία και όχι μια εφάπαξ ενέργεια. Αποτελεί θεμελιώδη αρχή για το σχεδιασμό και τη λειτουργία ολόκληρου του συστήματος.

---
